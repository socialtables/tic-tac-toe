<html>
  <head>
    <title>Tic Tac Toe</title>
    <script src="http://fb.me/react-0.12.0.js"></script>
    <script src="http://fb.me/JSXTransformer-0.12.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <link rel="stylesheet" href="t3cc.css">
  </head>
  <body>
    <div id="container"></div>
    <script type="text/jsx">
      /**
      * @jsx React.DOM
      */
        (function(){
            var Game = React.createClass({

              getInitialState: function() {
                return {
                  squares: [
                  " ", " ", " ",
                  " ", " ", " ",
                  " ", " ", " "
                  ],
                  clicks: 0,
                  letter: " "
                };
              },
              handleGameClick: function(position, letter) {
                var numClicks = this.state.clicks +=1;
                var playedLetter = numClicks%2 ? "O" : "X";
                this.setState({
                  clicks: numClicks,
                  letter: playedLetter,
                });
              },
              reset: function() {
                this.setState(this.getInitialState());
              },
                render: function() {
                    return <div>
                        <div id='game'>
                            {this.state.squares.map(function(square,position){
                              return <Square status={square} key={position} letter={this.state.letter} handleGameClick={this.handleGameClick} />
                            }, this) }
                        </div>
                    <button onClick={this.reset}>New Game</button>
                    </div>;
                },
            });
            var Square = React.createClass({
              getInitialState: function() {
                return {played: false,
                  letter: this.props.letter
                };
              },
              handleClick: function() {
                if(this.state.played === false) {
                  this.props.handleGameClick(this.props.key, this.props.letter);
                  this.setState({played: !this.state.played,
                    letter: this.props.letter
                  });
                }
              },
              render: function() {
                return (
                  <div onClick={this.handleClick} className="square">{this.props.letter}</div>
                  );
              }
            })
            React.render(
                <Game />,
                document.getElementById('container')
            );
        })();
    </script>
  </body>
</html>