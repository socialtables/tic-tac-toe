<html>
  <head>
    <title>Tic Tac Toe</title>
    <script src="http://fb.me/react-0.12.0.js"></script>
    <script src="http://fb.me/JSXTransformer-0.12.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <link rel="stylesheet" href="t3cc.css">
  </head>
  <body>
    <div id="container"></div>
    <script type="text/jsx">
      /**
      * @jsx React.DOM
      */
        (function(){
            var Game = React.createClass({

              getInitialState: function() {
                return {
                  squares: [
                  " ", " ", " ",
                  " ", " ", " ",
                  " ", " ", " "
                  ],
                  clicks: 0,
                  letter: "O"
                };
              },
              handleGameClick: function(squarePlayed, index) {
                var numClicks = this.state.clicks +=1;
                var playedLetter = numClicks%2 ? "X" : "O";
                this.setState({
                  clicks: numClicks,
                  letter: playedLetter
                });
              },
              reset: function() {
                this.setState(this.getInitialState());
              },
                render: function() {
                    return <div>
                        <div id='game' onClick={this.handleGameClick}>
                            {this.state.squares.map(function(squarePlayed, index){
                              return <Square key={index} letter={this.state.letter} onClick={this.handleGameClick} />
                            }, this) }
                        </div>
                    <button onClick={this.reset}>New Game</button>
                    </div>;
                },
            });
            var Square = React.createClass({
              getInitialState: function() {
                return {played: false,
                  letter: " "
                };
              },
              handleClick: function(event) {
                if(this.state.played === false) {
                  this.setState({played: !this.state.played,
                  });
                }
              },
              render: function() {
                return (
                  <div onClick={this.handleClick} className="square">{this.props.letter}</div>
                  );
              }
            })
            React.render(
                <Game />,
                document.getElementById('container')
            );
        })();
    </script>
  </body>
</html>